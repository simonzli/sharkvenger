(this.webpackJsonpsharkvenger=this.webpackJsonpsharkvenger||[]).push([[4],{532:function(e,t,n){"use strict";n.r(t),n.d(t,"HomePage",(function(){return U}));var a=n(516),i=n(0),r=n.n(i),c=n(70),o=n(515),l=n(68),u=n(166),s=n(248),d=n(102),p=n(119),f=n(101),v=new c.Loader;function b(){var e=Object(f.e)("BBB.jpg"),t=Object(i.useState)(-1),n=Object(a.a)(t,2),c=n[0],l=n[1],u=Object(i.useState)(0),s=Object(a.a)(u,2),d=s[0],p=s[1];Object(i.useEffect)((function(){b()}),[]),Object(o.useTick)((function(e){c<0||p((Date.now()-c)/300)}));var b=function(){try{v.add(e).load((function(){return l(Date.now())}))}catch(t){l(Date.now())}},h=Object(o.useApp)().screen,O=h.width,j=h.height,m=O/j>.75?O/600:j/800,g={x:O/2,y:j/2};return r.a.createElement(o.Sprite,{image:e,anchor:.5,position:g,scale:m,alpha:d})}var h=n(25),O=new c.TextStyle({fill:16777215,fontFamily:"'Roboto Mono', monospace",dropShadow:!0,dropShadowColor:0,dropShadowAngle:0,dropShadowBlur:4,dropShadowAlpha:.8,dropShadowDistance:0,fontSize:16,letterSpacing:1});function j(e){var t=Object(l.d)(p.f),n=t.name,c=t.text,u=t.namePosition,s=t.showConversationBox,d=e.onClick,f=Object(i.useState)(!1),v=Object(a.a)(f,2),b=v[0],j=v[1],m=Object(i.useState)(""),g=Object(a.a)(m,2),S=g[0],x=g[1],w=Object(o.useApp)().screen,y=w.width,E=w.height;Object(i.useEffect)((function(){k()}),[]),Object(i.useEffect)((function(){j(!1),k()}),[c]);var k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c&&(x(t),t.length<c.length?setTimeout((function(){return e(t+c.charAt(t.length))}),15):j(!0))};if(!s)return r.a.createElement(r.a.Fragment,null);var A=Math.min(400,y-16),C=(y-A)/2,T=function(e){b&&d&&d(e)};return r.a.createElement(o.Container,{position:[C,E-12-120-24],click:T,tap:T,interactive:!0},r.a.createElement(o.Graphics,{draw:function(e){0===e.getBounds().width&&(e.lineStyle(2,16777215,.8),e.beginFill(2368810,.5),e.drawRoundedRect(0,0,A,120,8),e.endFill())},position:[0,24]}),b&&void 0!==e.onClick&&r.a.createElement(o.Graphics,{draw:function(e){if(0===e.getBounds().width){e.lineStyle(2,16777215,.8),e.beginFill(16763394,1),e.moveTo(0,0),e.lineTo(18,8),e.lineTo(0,16),e.lineTo(0,0),e.closePath(),e.endFill();var t=A-30;e.position.set(t,116),h.a.to(e.position,{x:t+2,y:116,repeat:-1,duration:.25,yoyo:!0})}}}),function(){if(n)switch(u){case"left":case"middle":return r.a.createElement(o.Text,{text:n,anchor:[0,0],x:0,style:O});case"right":return r.a.createElement(o.Text,{text:n,anchor:[1,0],x:A,style:O})}}(),r.a.createElement(o.BitmapText,{text:S,position:[8,32],letterSpacing:.5,style:{fontName:"Lato",fontSize:16,maxWidth:A-16}}))}function m(){var e=Object(o.useApp)(),t=e.view.width/e.renderer.resolution,n=1;return t<=375&&(n=.85),t<=320&&(n=.75),r.a.createElement(o.Container,{position:[14,16],scale:n},r.a.createElement(o.Sprite,{image:Object(f.e)("CAPS.png"),position:[2,0],scale:.6}),r.a.createElement(o.Sprite,{image:Object(f.e)("TBP.png"),position:[0,44],scale:.45}))}var g=n(520),S=n.n(g),x={padding:"8px",fontSize:"16px",color:"#26272E"},w={fill:15264243,rounded:8,stroke:{color:13356768,width:4}},y={default:w,focused:{fill:14803950,rounded:8,stroke:{color:11251654,width:4}},disabled:{fill:14408667,rounded:16}},E=function(e,t,n){var a;if(n.position){var i=Object(f.a)(n.position);e.position.set(i.x,i.y)}void 0!==n.x&&void 0!==n.y&&e.position.set(n.x,n.y),n.onInput&&(e.removeListener("input"),e.on("input",n.onInput)),e.placeholder=null!==(a=n.placeholder)&&void 0!==a?a:""},k=Object(o.PixiComponent)("Input",{create:function(e){var t=Object(d.a)(Object(d.a)({},x),e.input),n=e.box,a=e.box,i=y;e.box&&(i=Object.keys(e.box).includes("default")?{default:Object(d.a)(Object(d.a)({},w),n.default),focused:Object(d.a)(Object(d.a)({},y.focused),n.focused),disabled:Object(d.a)(Object(d.a)({},y.disabled),n.disabled)}:Object(d.a)(Object(d.a)({},w),a));var r=new S.a({input:t,box:i});return E(r,0,e),setTimeout((function(){return r.focus()})),r},applyProps:E});function A(){return r.a.createElement(k,{x:16,y:120,onInput:function(e){return console.log(e)},placeholder:"Enter your Uniqname"})}var C=n(518),T=n(21),P=n.n(T),I=n(45),B=function(){var e=Object(I.a)(P.a.mark((function e(){var t,n,a,i,r,c,o=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:[],n=o.length>1?o[1]:void 0,a=o.length>2&&void 0!==o[2]?o[2]:0,Array.isArray(t)){e.next=8;break}return e.next=6,t(n);case 6:e.next=30;break;case 8:if(a%2!==0){e.next=13;break}return e.next=11,Promise.all(t.map((function(e){return B(e,n,a+1)})));case 11:e.next=30;break;case 13:i=Object(u.a)(t),e.prev=14,i.s();case 16:if((r=i.n()).done){e.next=22;break}return c=r.value,e.next=20,B(c,n,a+1);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:0===a&&n.dispatch(p.d.ready());case 31:case"end":return e.stop()}}),e,null,[[14,24,27,30]])})));return function(){return e.apply(this,arguments)}}(),D=function(e){return[e.initialPosition,e.initialAngle,e.initialScale,e.movements]},F=function(e,t){if(t){var n={};return t.initialPosition!==e.initialPosition&&(n.initialPosition=e.initialPosition),t.initialAngle!==e.initialAngle&&(n.initialAngle=e.initialAngle),t.initialScale!==e.initialScale&&(n.initialScale=e.initialScale),n}},M=n(52),z=function(e,t){var n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){var c,o,l=i;if(r||void 0!==t.initialScale){var u,s=Object(f.a)(null!==(u=i.initialScale)&&void 0!==u?u:{x:1,y:1});if(t.initialScale){var d=t.initialScale.valueOf();s=Object(f.g)(s,d)}e.scale.set(s.x,s.y),l.initialScale=s}if(r||void 0!==t.initialAngle)e.angle=(null!==(c=i.initialAngle)&&void 0!==c?c:0)+(null!==(o=t.initialAngle)&&void 0!==o?o:0),l.initialAngle=e.angle;var p=Object(f.a)(null!==(n=i.initialPosition)&&void 0!==n?n:{x:0,y:0});if(r&&e.position.set(p.x,p.y),void 0!==t.initialPosition){var v=Object(f.a)(t.initialPosition);e.position.set(v.x,v.y)}return l.initialPosition=[e.position.x,e.position.y],r&&(null===(a=t.movements)||void 0===a?void 0:a.includes(M.c))&&(e.tint=10066329),r&&e.anchor.set(.5,.5),l}},N=n(97);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.c)(),n=Object(i.useState)(),c=Object(a.a)(n,2),u=c[0],s=c[1],d=Object(C.a)(e),p=Object(o.useApp)(),v=p.screen.width,b=Object(f.a)([-Math.min(1.5,v/500),Math.min(1.5,v/500)]),h=-45,O={initialScale:b,initialAngle:h,initialPosition:e.initialPosition};return Object(i.useEffect)((function(){var n;if(u){var a=F(e,d);B(null!==(n=e.movements)&&void 0!==n?n:[],{sprite:u,dispatch:t,pixiApp:p,character:N.Character.MommyShark,initialValues:z(u,a,O,!1)})}}),D(e)),r.a.createElement(o.Sprite,{ref:function(n){var a;n&&!u&&(s(n),B(null!==(a=e.movements)&&void 0!==a?a:[],{sprite:n,dispatch:t,pixiApp:p,initialValues:z(n,e,O,!0)}))},image:Object(f.e)("shark.png")})}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.useState)(),n=Object(a.a)(t,2),c=n[0],u=n[1],s=Object(C.a)(e),d=Object(l.c)(),p=Object(o.useApp)(),v=Object(f.a)([-Math.min(1.25,p.screen.width/600),Math.min(1.25,p.screen.width/600)]),b={initialScale:v,initialPosition:e.initialPosition};return Object(i.useEffect)((function(){var t;if(c){var n=F(e,s);B(null!==(t=e.movements)&&void 0!==t?t:[],{sprite:c,dispatch:d,pixiApp:p,initialValues:z(c,n,b,!1)})}}),D(e)),r.a.createElement(o.Sprite,{ref:function(t){var n;t&&!c&&(u(t),B(null!==(n=e.movements)&&void 0!==n?n:[],{sprite:t,dispatch:d,pixiApp:p,initialValues:z(t,e,b,!0)}))},image:Object(f.e)("suica.png")})}var W=n(69);function V(){var e,t=Object(l.d)(p.g),n=Object(l.c)(),c=Object(i.useState)(!1),v=Object(a.a)(c,2),h=v[0],O=v[1],g=Object(i.useState)([]),S=Object(a.a)(g,2),x=S[0],w=S[1],y=Object(i.useState)(!1),E=Object(a.a)(y,2),k=E[0],C=E[1],T=t.script,P=t.line,I=Object(f.f)(T),B=null!==(e=I.lines.find((function(e){return e.id===P})))&&void 0!==e?e:I.lines[0],D=Object(o.useApp)().screen,F=D.width,z=D.height;Object(i.useEffect)((function(){V(I,B)}),[]),Object(i.useEffect)((function(){_()}),[B]),Object(i.useEffect)((function(){t.readyCount===B.settings.length&&(C(!0),B.autoNext&&V())}),[t.readyCount]),Object(i.useEffect)((function(){var e,t,a,i=W.b[null!==(e=B.mainCharacter)&&void 0!==e?e:-1],r=G(null!==(t=B.mainCharacter)&&void 0!==t?t:-1),c=null!==(a=null===r||void 0===r?void 0:r.position)&&void 0!==a?a:"left",o=B.text,l=void 0===o?"":o;n(p.a.updateConversation({name:i,namePosition:c,text:l,showConversationBox:void 0!==B.text}))}),[B]);var V=function(e,a){var i,r;if(e)i=e,r=null!==a&&void 0!==a?a:e.lines[0];else{var c=I.lines.findIndex((function(e){return e.id===P}));if(c===I.lines.length-1){if(!I.jumpTo)return;var o;i=Object(f.f)(I.jumpTo.script),r=I.jumpTo.lineId&&null!==(o=i.lines.find((function(e){return e.id===I.jumpTo.lineId})))&&void 0!==o?o:i.lines[0]}else i=I,r=I.lines[c+1]}I.id===i.id||I.id.startsWith(N.TRANSITION_ID)?n(p.d.updateDirector(Object(d.a)(Object(d.a)({},t),{},{script:i.id,line:r.id,readyCount:0}))):(w([]),O(!1),n(p.d.updateDirector(Object(d.a)(Object(d.a)({},t),{},{script:Object(N.getTransitionScriptId)(i.id,r.id),line:"0",readyCount:0}))))},G=function(e){return x.find((function(t){return t.character===e}))},J=function(e,t,n){var a={},i=z-130;return void 0===n&&(a.initialPosition=[48,i],a.initialScale=[1,1],"right"===Object(f.c)(t,I,e.id)&&(a.initialPosition[0]=F-90,a.initialScale[0]=-1)),a},U=function(e){var t=function(e){switch(e){case W.a.MommyShark:return R;case W.a.Suica:return L;default:throw new Error("Unknown character: "+e)}}(e);return{position:Object(f.c)(e,I,B.id),character:e,sprite:t,props:J(B,e)}},_=function(){var e=Object(s.a)(x);if(I.id.startsWith(N.TRANSITION_ID)){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.props=Object(d.a)(Object(d.a)({},a.props),{},{movements:[M.e]})}}catch(g){n.e(g)}finally{n.f()}w(e)}else{if(!h){var i,r=Object(f.d)(I,B.id),c=Object(u.a)(r);try{for(c.s();!(i=c.n()).done;){var o=i.value;void 0===G(o)&&e.push(U(o))}}catch(g){c.e(g)}finally{c.f()}O(!0)}var l,p=Object(u.a)(B.settings);try{var v=function(){var t=l.value;e.find((function(e){return e.character===t.character}))||e.push(U(t.character))};for(p.s();!(l=p.n()).done;)v()}catch(g){p.e(g)}finally{p.f()}var b,j=Object(u.a)(e);try{var m=function(){var e,t=b.value,n=B.settings.find((function(e){return e.character===t.character})),a=null!==(e=null===n||void 0===n?void 0:n.movements)&&void 0!==e?e:[];B.noActiveDetection||a.push(function(e){var t;if(B.mainCharacter===e)return M.b;var n=B.settings.find((function(t){return t.character===e}));return n&&(null===(t=n.movements)||void 0===t?void 0:t.includes(M.b))?M.b:M.c}(t.character)),t.props=Object(d.a)(Object(d.a)({},t.props),{},{movements:a})};for(j.s();!(b=j.n()).done;)m()}catch(g){j.e(g)}finally{j.f()}w(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(m,null),r.a.createElement(o.Container,null,x.sort((function(e,t){var n,a;return(null!==(n=e.props.movements)&&void 0!==n?n:[]).includes(M.b)?(null!==(a=t.props.movements)&&void 0!==a?a:[]).includes(M.b)?B.mainCharacter===e.character?1:-1:1:-1})).map((function(e){return r.a.createElement(e.sprite,Object.assign({},e.props,{key:e.character}))}))),r.a.createElement(j,{onClick:k?function(){return V()}:void 0}),r.a.createElement(A,null))}function G(){var e=Object(o.useApp)(),t=e.screen,n=t.width,l=t.height,u={x:50,y:50},s={x:n-80-16,y:50},p={x:n/2-85,y:l/2-85-40},v=Object(i.useState)(),b=Object(a.a)(v,2),O=b[0],j=b[1],m=Object(i.useState)(),g=Object(a.a)(m,2),S=g[0],x=g[1],w=Object(i.useState)(!1),y=Object(a.a)(w,2),E=y[0],k=y[1],A=Object(i.useState)(),C=Object(a.a)(A,2),T=C[0],B=C[1],D=Object(i.useState)(),F=Object(a.a)(D,2),M=F[0],z=F[1],N=Object(i.useCallback)((function(e){e.clear(),e.beginFill(5419993),e.lineStyle(7,3970242),e.drawCircle(0,0,50),e.endFill()}),[]),R=Object(i.useCallback)(function(){var e=Object(I.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:(n=h.a.timeline()).pause(),n.fromTo(t.position,s,Object(d.a)(Object(d.a)({},p),{},{ease:"power2.inOut"}),0),n.fromTo(t.scale,Object(f.a)(.8),Object(d.a)(Object(d.a)({},Object(f.a)(1.7)),{},{ease:"power2.inOut"}),0),B(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T]),L=Object(i.useCallback)(Object(I.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:t=T,n=E,k(!E),h.a.to(t.pause(),{duration:n?t.time():1,time:n?0:1});case 6:case"end":return e.stop()}}),e)}))),[E,T]),W=Object(i.useCallback)(Object(I.a)(P.a.mark((function e(){var t,n,a,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:t=Math.max(.6,Math.random()+.5),n={ease:"power2.inOut"},a=Object(d.a)({duration:1,repeat:-1,yoyo:!0},n),i=h.a.getTweensOf(S.scale);try{r=function(){var e=h.a.to(S.scale,Object(d.a)({x:1.5*t*.125,y:1.5*t*.125},a));e.eventCallback("onRepeat",(function(){var t;e.vars.repeatTime=(null!==(t=e.vars.repeatTime)&&void 0!==t?t:0)+1}))},i.filter((function(e){return!e.isActive()})).forEach((function(e){return e.pause()})),(c=i.filter((function(e){return e.isActive()}))).length>0?(c.slice(1).forEach((function(e){return e.pause()})),c[0].eventCallback("onRepeat",(function(){var e;c[0].vars.repeatTime=(null!==(e=c[0].vars.repeatTime)&&void 0!==e?e:0)+1,c[0].vars.repeatTime%2===0&&(c[0].pause(),r())}))):r()}catch(o){console.error(o)}case 7:case"end":return e.stop()}}),e)}))),[S]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.Container,{ref:function(e){e&&!O&&(e.position.set(s.x,s.y),e.scale.set(.8,.8),j(e),R(e))},tap:L,click:L,interactive:!0},r.a.createElement(o.Graphics,{draw:N,anchor:[.5,.5],position:[u.x,u.y-5]}),r.a.createElement(o.Sprite,{ref:function(e){e&&(e.scale.set(.125,.125),x(e),Object(f.h)((function(e){z(e),W()})))},angle:15,image:Object(f.e)("heart.svg"),anchor:[.5,.55],position:u})),r.a.createElement(o.Text,{text:M?JSON.stringify({latitude:M.coords.latitude,longitude:M.coords.longitude,accuracy:"".concat(M.coords.accuracy," meters"),altitude:M.coords.altitude,altitudeAccuracy:M.coords.altitudeAccuracy},void 0,1):"",position:[16,160],style:new c.TextStyle({wordWrap:!0,wordWrapWidth:e.screen.width-32,fontSize:14,align:"left",letterSpacing:2,fill:16777215,dropShadow:!0,dropShadowColor:0,dropShadowAngle:0,dropShadowBlur:4,dropShadowAlpha:.8,dropShadowDistance:0})}))}var J=function(e){var t=e.render,n=e.Context,a=e.children;return r.a.createElement(n.Consumer,null,(function(e){return t(r.a.createElement(n.Provider,{value:e},a))}))};function U(){var e=Object(i.useState)(!1),t=Object(a.a)(e,2),n=t[0],u=t[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),p=d[0],v=d[1],b=Object(i.useState)(),h=Object(a.a)(b,2),O=h[0],j=h[1],m=Object(i.useState)(0),g=Object(a.a)(m,2),S=g[0],x=g[1];Object(i.useEffect)((function(){return w()}),[]);var w=function(){(new c.Loader).add("Lato",Object(f.e)("/Lato.fnt"),new c.TextStyle({dropShadowColor:819,dropShadowAngle:0,dropShadowBlur:2,dropShadowAlpha:.5,dropShadowDistance:2,letterSpacing:.5})).load((function(){v(!0)}))};return window.onresize=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;e&&(u(!1),e.resize(),u(!0))}()},r.a.createElement("div",{id:"canvas",style:{opacity:S}},r.a.createElement(J,{Context:l.b,render:function(e){return r.a.createElement(o.Stage,{width:400,onMount:function(e){j(e),e.resizeTo=document.getElementById("canvas"),setTimeout((function(){e.resize(),u(!0),x(1)}))},options:{forceCanvas:!1,antialias:!0,backgroundColor:5419993,autoDensity:!0,autoStart:!0}},e)}},n&&p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement(G,null))))}}}]);