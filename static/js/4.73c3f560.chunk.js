(this.webpackJsonpsharkvenger=this.webpackJsonpsharkvenger||[]).push([[4],{532:function(e,t,n){"use strict";n.r(t),n.d(t,"HomePage",(function(){return U}));var a=n(516),i=n(0),r=n.n(i),c=n(70),o=n(515),l=n(68),u=n(166),s=n(248),d=n(102),f=n(517),p=n(119),b=n(101),v=new c.Loader;function h(){var e=Object(b.e)("BBB.jpg"),t=Object(i.useState)(-1),n=Object(a.a)(t,2),c=n[0],l=n[1],u=Object(i.useState)(0),s=Object(a.a)(u,2),d=s[0],f=s[1];Object(i.useEffect)((function(){p()}),[]),Object(o.useTick)((function(e){c<0||f((Date.now()-c)/300)}));var p=function(){try{v.add(e).load((function(){return l(Date.now())}))}catch(t){l(Date.now())}},h=Object(o.useApp)().screen,O=h.width,j=h.height,m=O/j>.75?O/600:j/800,g={x:O/2,y:j/2};return r.a.createElement(o.Sprite,{image:e,anchor:.5,position:g,scale:m,alpha:d})}var O=n(25),j=new c.TextStyle({fill:16777215,fontFamily:"'Roboto Mono', monospace",dropShadow:!0,dropShadowColor:0,dropShadowAngle:0,dropShadowBlur:4,dropShadowAlpha:.8,dropShadowDistance:0,fontSize:16,letterSpacing:1});function m(e){var t=Object(l.d)(p.f),n=t.name,c=t.text,u=t.namePosition,s=t.showConversationBox,d=e.onClick,f=Object(i.useState)(!1),b=Object(a.a)(f,2),v=b[0],h=b[1],m=Object(i.useState)(""),g=Object(a.a)(m,2),S=g[0],w=g[1],x=Object(o.useApp)().screen,y=x.width,E=x.height;Object(i.useEffect)((function(){k()}),[]),Object(i.useEffect)((function(){h(!1),k()}),[c]);var k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c&&(w(t),t.length<c.length?setTimeout((function(){return e(t+c.charAt(t.length))}),15):h(!0))};if(!s)return r.a.createElement(r.a.Fragment,null);var A=Math.min(400,y-16),C=(y-A)/2,T=function(e){v&&d&&d(e)};return r.a.createElement(o.Container,{position:[C,E-12-120-24],click:T,tap:T,interactive:!0},r.a.createElement(o.Graphics,{draw:function(e){0===e.getBounds().width&&(e.lineStyle(2,16777215,.8),e.beginFill(2368810,.5),e.drawRoundedRect(0,0,A,120,8),e.endFill())},position:[0,24]}),v&&void 0!==e.onClick&&r.a.createElement(o.Graphics,{draw:function(e){if(0===e.getBounds().width){e.lineStyle(2,16777215,.8),e.beginFill(16763394,1),e.moveTo(0,0),e.lineTo(18,8),e.lineTo(0,16),e.lineTo(0,0),e.closePath(),e.endFill();var t=A-30;e.position.set(t,116),O.a.to(e.position,{x:t+2,y:116,repeat:-1,duration:.25,yoyo:!0})}}}),function(){if(n)switch(u){case"left":case"middle":return r.a.createElement(o.Text,{text:n,anchor:[0,0],x:0,style:j});case"right":return r.a.createElement(o.Text,{text:n,anchor:[1,0],x:A,style:j})}}(),r.a.createElement(o.BitmapText,{text:S,position:[8,32],letterSpacing:.5,style:{fontName:"Lato",fontSize:16,maxWidth:A-16}}))}function g(){var e=Object(o.useApp)(),t=e.view.width/e.renderer.resolution,n=1;return t<=375&&(n=.85),t<=320&&(n=.75),r.a.createElement(o.Container,{position:[14,16],scale:n},r.a.createElement(o.Sprite,{image:Object(b.e)("CAPS.png"),position:[2,0],scale:.6}),r.a.createElement(o.Sprite,{image:Object(b.e)("TBP.png"),position:[0,44],scale:.45}))}var S=n(520),w=n.n(S),x={padding:"8px",fontSize:"16px",color:"#26272E"},y={fill:15264243,rounded:8,stroke:{color:13356768,width:4}},E={default:y,focused:{fill:14803950,rounded:8,stroke:{color:11251654,width:4}},disabled:{fill:14408667,rounded:16}},k=function(e,t,n){var a;if(n.position){var i=Object(b.a)(n.position);e.position.set(i.x,i.y)}void 0!==n.x&&void 0!==n.y&&e.position.set(n.x,n.y),n.onInput&&(e.removeListener("input"),e.on("input",n.onInput)),e.placeholder=null!==(a=n.placeholder)&&void 0!==a?a:""},A=Object(o.PixiComponent)("Input",{create:function(e){var t=Object(d.a)(Object(d.a)({},x),e.input),n=e.box,a=e.box,i=E;e.box&&(i=Object.keys(e.box).includes("default")?{default:Object(d.a)(Object(d.a)({},y),n.default),focused:Object(d.a)(Object(d.a)({},E.focused),n.focused),disabled:Object(d.a)(Object(d.a)({},E.disabled),n.disabled)}:Object(d.a)(Object(d.a)({},y),a));var r=new w.a({input:t,box:i});return k(r,0,e),setTimeout((function(){return r.focus()})),r},applyProps:k});function C(){return r.a.createElement(A,{x:16,y:120,onInput:function(e){return console.log(e)},placeholder:"Enter your Uniqname"})}var T=n(21),P=n.n(T),B=n(45),M=function(){var e=Object(B.a)(P.a.mark((function e(){var t,n,a,i,r,c,o=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:[],n=o.length>1?o[1]:void 0,a=o.length>2&&void 0!==o[2]?o[2]:0,Array.isArray(t)){e.next=8;break}return e.next=6,t(n);case 6:e.next=30;break;case 8:if(a%2!==0){e.next=13;break}return e.next=11,Promise.all(t.map((function(e){return M(e,n,a+1)})));case 11:e.next=30;break;case 13:i=Object(u.a)(t),e.prev=14,i.s();case 16:if((r=i.n()).done){e.next=22;break}return c=r.value,e.next=20,M(c,n,a+1);case 20:e.next=16;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),i.e(e.t0);case 27:return e.prev=27,i.f(),e.finish(27);case 30:0===a&&n.dispatch(p.d.ready(n.character+""));case 31:case"end":return e.stop()}}),e,null,[[14,24,27,30]])})));return function(){return e.apply(this,arguments)}}(),F=function(e){return[e.initialPosition,e.initialAngle,e.initialScale,e.movements]},D=function(e,t){if(t){var n={};return t.initialPosition!==e.initialPosition&&(n.initialPosition=e.initialPosition),t.initialAngle!==e.initialAngle&&(n.initialAngle=e.initialAngle),t.initialScale!==e.initialScale&&(n.initialScale=e.initialScale),n}},I=n(52),z=function(e,t){var n,a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e&&t){var c,o,l=i;if(r||void 0!==t.initialScale){var u,s=Object(b.a)(null!==(u=i.initialScale)&&void 0!==u?u:{x:1,y:1});if(t.initialScale){var d=t.initialScale.valueOf();s=Object(b.g)(s,d)}e.scale.set(s.x,s.y),l.initialScale=s}if(r||void 0!==t.initialAngle)e.angle=(null!==(c=i.initialAngle)&&void 0!==c?c:0)+(null!==(o=t.initialAngle)&&void 0!==o?o:0),l.initialAngle=e.angle;var f=Object(b.a)(null!==(n=i.initialPosition)&&void 0!==n?n:{x:0,y:0});if(r&&e.position.set(f.x,f.y),void 0!==t.initialPosition){var p=Object(b.a)(t.initialPosition);e.position.set(p.x,p.y)}return l.initialPosition=[e.position.x,e.position.y],r&&(null===(a=t.movements)||void 0===a?void 0:a.includes(I.c))&&(e.tint=10066329),r&&e.anchor.set(.5,.5),l}},L=n(96);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.c)(),n=Object(i.useState)(),c=Object(a.a)(n,2),u=c[0],s=c[1],p=Object(f.a)(e),v=Object(o.useApp)(),h=v.screen.width,O=Object(b.a)([-Math.min(1.5,h/500),Math.min(1.5,h/500)]),j=-45,m={initialScale:O,initialAngle:j,initialPosition:e.initialPosition},g={dispatch:t,pixiApp:v,character:L.Character.MommyShark};return Object(i.useEffect)((function(){var t;if(u){var n=D(e,p);M(null!==(t=e.movements)&&void 0!==t?t:[],Object(d.a)(Object(d.a)({},g),{},{sprite:u,initialValues:z(u,n,m,!1)}))}}),F(e)),r.a.createElement(o.Sprite,{ref:function(t){var n;t&&!u&&(s(t),M(null!==(n=e.movements)&&void 0!==n?n:[],Object(d.a)(Object(d.a)({},g),{},{sprite:t,initialValues:z(t,e,m,!0)})))},image:Object(b.e)("shark.png")})}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.useState)(),n=Object(a.a)(t,2),c=n[0],u=n[1],s=Object(f.a)(e),p=Object(l.c)(),v=Object(o.useApp)(),h=Object(b.a)([-Math.min(1.25,v.screen.width/600),Math.min(1.25,v.screen.width/600)]),O={initialScale:h,initialPosition:e.initialPosition},j={dispatch:p,pixiApp:v,character:L.Character.Suica};return Object(i.useEffect)((function(){var t;if(c){var n=D(e,s);M(null!==(t=e.movements)&&void 0!==t?t:[],Object(d.a)(Object(d.a)({},j),{},{sprite:c,initialValues:z(c,n,O,!1)}))}}),F(e)),r.a.createElement(o.Sprite,{ref:function(t){var n;t&&!c&&(u(t),M(null!==(n=e.movements)&&void 0!==n?n:[],Object(d.a)(Object(d.a)({},j),{},{sprite:t,initialValues:z(t,e,O,!0)})))},image:Object(b.e)("suica.png")})}var W=n(69);function G(){var e,t=Object(l.d)(p.g),n=Object(l.c)(),c=Object(i.useState)(!1),v=Object(a.a)(c,2),O=v[0],j=v[1],S=Object(i.useState)([]),w=Object(a.a)(S,2),x=w[0],y=w[1],E=Object(i.useState)(!1),k=Object(a.a)(E,2),A=k[0],T=k[1],P=Object(f.a)(x),B=t.script,M=t.line,F=Object(b.f)(B),D=null!==(e=F.lines.find((function(e){return e.id===M})))&&void 0!==e?e:F.lines[0],z=Object(o.useApp)().screen,G=z.width,J=z.height;Object(i.useEffect)((function(){N(F,D)}),[]),Object(i.useEffect)((function(){K()}),[D]),Object(i.useEffect)((function(){var e=Object(L.isTransitionScript)(B);(e&&(!P||t.ready.length===Math.min(P.length,1))||!e&&t.ready.length===D.settings.length)&&(T(!0),D.autoNext&&N())}),[t.ready]),Object(i.useEffect)((function(){var e,t,a,i=W.b[null!==(e=D.mainCharacter)&&void 0!==e?e:-1],r=U(null!==(t=D.mainCharacter)&&void 0!==t?t:-1),c=null!==(a=null===r||void 0===r?void 0:r.position)&&void 0!==a?a:"left",o=D.text,l=void 0===o?"":o;n(p.a.updateConversation({name:i,namePosition:c,text:l,showConversationBox:void 0!==D.text}))}),[D]);var N=function(e,a){var i,r;if(e)i=e,r=null!==a&&void 0!==a?a:e.lines[0];else{var c=F.lines.findIndex((function(e){return e.id===M}));if(c===F.lines.length-1){if(!F.jumpTo)return;var o;i=Object(b.f)(F.jumpTo.script),r=F.jumpTo.lineId&&null!==(o=i.lines.find((function(e){return e.id===F.jumpTo.lineId})))&&void 0!==o?o:i.lines[0]}else i=F,r=F.lines[c+1]}F.id===i.id||Object(L.isTransitionScript)(F.id)?n(p.d.updateDirector(Object(d.a)(Object(d.a)({},t),{},{script:i.id,line:r.id,ready:[]}))):(y([]),j(!1),n(p.d.updateDirector(Object(d.a)(Object(d.a)({},t),{},{script:Object(L.getTransitionScriptId)(i.id,r.id),line:"0",ready:[]})))),T(!1)},U=function(e){return x.find((function(t){return t.character===e}))},q=function(e,t,n){var a={},i=J-130;return void 0===n&&(a.initialPosition=[48,i],a.initialScale=[1,1],"right"===Object(b.c)(t,F,e.id)&&(a.initialPosition[0]=G-90,a.initialScale[0]=-1)),a},H=function(e){var t=function(e){switch(e){case W.a.MommyShark:return R;case W.a.Suica:return V;default:throw new Error("Unknown character: "+e)}}(e);return{position:Object(b.c)(e,F,D.id),character:e,sprite:t,props:q(D,e)}},K=function(){var e=Object(s.a)(x);if(Object(L.isTransitionScript)(F.id)){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.props=Object(d.a)(Object(d.a)({},a.props),{},{movements:[[I.c,I.e]]})}}catch(g){n.e(g)}finally{n.f()}y(e)}else{if(!O){var i,r=Object(b.d)(F,D.id),c=Object(u.a)(r);try{for(c.s();!(i=c.n()).done;){var o=i.value;void 0===U(o)&&e.push(H(o))}}catch(g){c.e(g)}finally{c.f()}j(!0)}var l,f=Object(u.a)(D.settings);try{var p=function(){var t=l.value;e.find((function(e){return e.character===t.character}))||e.push(H(t.character))};for(f.s();!(l=f.n()).done;)p()}catch(g){f.e(g)}finally{f.f()}var v,h=Object(u.a)(e);try{var m=function(){var e,t=v.value,n=D.settings.find((function(e){return e.character===t.character})),a=null!==(e=null===n||void 0===n?void 0:n.movements)&&void 0!==e?e:[];D.noActiveDetection||a.push(function(e){var t;if(D.mainCharacter===e)return I.b;var n=D.settings.find((function(t){return t.character===e}));return n&&(null===(t=n.movements)||void 0===t?void 0:t.includes(I.b))?I.b:I.c}(t.character)),t.props=Object(d.a)(Object(d.a)({},t.props),{},{movements:a})};for(h.s();!(v=h.n()).done;)m()}catch(g){h.e(g)}finally{h.f()}y(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(g,null),r.a.createElement(o.Container,null,x.sort((function(e,t){var n,a;return(null!==(n=e.props.movements)&&void 0!==n?n:[]).includes(I.b)?(null!==(a=t.props.movements)&&void 0!==a?a:[]).includes(I.b)?D.mainCharacter===e.character?1:-1:1:-1})).map((function(e){return r.a.createElement(e.sprite,Object.assign({},e.props,{key:e.character}))}))),r.a.createElement(m,{onClick:A?function(){return N()}:void 0}),r.a.createElement(C,null))}function J(){var e=Object(o.useApp)(),t=e.screen,n=t.width,l=t.height,u={x:50,y:50},s={x:n-80-16,y:50},f={x:n/2-85,y:l/2-85-40},p=Object(i.useState)(),v=Object(a.a)(p,2),h=v[0],j=v[1],m=Object(i.useState)(),g=Object(a.a)(m,2),S=g[0],w=g[1],x=Object(i.useState)(!1),y=Object(a.a)(x,2),E=y[0],k=y[1],A=Object(i.useState)(),C=Object(a.a)(A,2),T=C[0],M=C[1],F=Object(i.useState)(),D=Object(a.a)(F,2),I=D[0],z=D[1],L=Object(i.useCallback)((function(e){e.clear(),e.beginFill(5419993),e.lineStyle(7,3970242),e.drawCircle(0,0,50),e.endFill()}),[]),R=Object(i.useCallback)(function(){var e=Object(B.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:(n=O.a.timeline()).pause(),n.fromTo(t.position,s,Object(d.a)(Object(d.a)({},f),{},{ease:"power2.inOut"}),0),n.fromTo(t.scale,Object(b.a)(.8),Object(d.a)(Object(d.a)({},Object(b.a)(1.7)),{},{ease:"power2.inOut"}),0),M(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T]),V=Object(i.useCallback)(Object(B.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:t=T,n=E,k(!E),O.a.to(t.pause(),{duration:n?t.time():1,time:n?0:1});case 6:case"end":return e.stop()}}),e)}))),[E,T]),W=Object(i.useCallback)(Object(B.a)(P.a.mark((function e(){var t,n,a,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S){e.next=2;break}return e.abrupt("return");case 2:t=Math.max(.6,Math.random()+.5),n={ease:"power2.inOut"},a=Object(d.a)({duration:1,repeat:-1,yoyo:!0},n),i=O.a.getTweensOf(S.scale);try{r=function(){var e=O.a.to(S.scale,Object(d.a)({x:1.5*t*.125,y:1.5*t*.125},a));e.eventCallback("onRepeat",(function(){var t;e.vars.repeatTime=(null!==(t=e.vars.repeatTime)&&void 0!==t?t:0)+1}))},i.filter((function(e){return!e.isActive()})).forEach((function(e){return e.pause()})),(c=i.filter((function(e){return e.isActive()}))).length>0?(c.slice(1).forEach((function(e){return e.pause()})),c[0].eventCallback("onRepeat",(function(){var e;c[0].vars.repeatTime=(null!==(e=c[0].vars.repeatTime)&&void 0!==e?e:0)+1,c[0].vars.repeatTime%2===0&&(c[0].pause(),r())}))):r()}catch(o){console.error(o)}case 7:case"end":return e.stop()}}),e)}))),[S]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.Container,{ref:function(e){e&&!h&&(e.position.set(s.x,s.y),e.scale.set(.8,.8),j(e),R(e))},tap:V,click:V,interactive:!0},r.a.createElement(o.Graphics,{draw:L,anchor:[.5,.5],position:[u.x,u.y-5]}),r.a.createElement(o.Sprite,{ref:function(e){e&&(e.scale.set(.125,.125),w(e),Object(b.h)((function(e){z(e),W()})))},angle:15,image:Object(b.e)("heart.svg"),anchor:[.5,.55],position:u})),r.a.createElement(o.Text,{text:I?JSON.stringify({latitude:I.coords.latitude,longitude:I.coords.longitude,accuracy:"".concat(I.coords.accuracy," meters"),altitude:I.coords.altitude,altitudeAccuracy:I.coords.altitudeAccuracy},void 0,1):"",position:[16,160],style:new c.TextStyle({wordWrap:!0,wordWrapWidth:e.screen.width-32,fontSize:14,align:"left",letterSpacing:2,fill:16777215,dropShadow:!0,dropShadowColor:0,dropShadowAngle:0,dropShadowBlur:4,dropShadowAlpha:.8,dropShadowDistance:0})}))}var N=function(e){var t=e.render,n=e.Context,a=e.children;return r.a.createElement(n.Consumer,null,(function(e){return t(r.a.createElement(n.Provider,{value:e},a))}))};function U(){var e=Object(i.useState)(!1),t=Object(a.a)(e,2),n=t[0],u=t[1],s=Object(i.useState)(!1),d=Object(a.a)(s,2),f=d[0],p=d[1],v=Object(i.useState)(),h=Object(a.a)(v,2),O=h[0],j=h[1],m=Object(i.useState)(0),g=Object(a.a)(m,2),S=g[0],w=g[1];Object(i.useEffect)((function(){return x()}),[]);var x=function(){(new c.Loader).add("Lato",Object(b.e)("/Lato.fnt"),new c.TextStyle({dropShadowColor:819,dropShadowAngle:0,dropShadowBlur:2,dropShadowAlpha:.5,dropShadowDistance:2,letterSpacing:.5})).load((function(){p(!0)}))};return window.onresize=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;e&&(u(!1),e.resize(),u(!0))}()},r.a.createElement("div",{id:"canvas",style:{opacity:S}},r.a.createElement(N,{Context:l.b,render:function(e){return r.a.createElement(o.Stage,{width:400,onMount:function(e){j(e),e.resizeTo=document.getElementById("canvas"),setTimeout((function(){e.resize(),u(!0),w(1)}))},options:{forceCanvas:!1,antialias:!0,backgroundColor:5419993,autoDensity:!0,autoStart:!0}},e)}},n&&f&&r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement(J,null))))}}}]);